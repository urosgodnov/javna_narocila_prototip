## Story: 15.2 - Implement 4-Step Form with Edge-Aligned Navigation Buttons

**Story:**
As a user, I want the public procurement form to have 4 distinct steps with the navigation buttons ("Naprej" and "Nazaj") positioned at the edges of the form, so that the form flow is clearer and the navigation is more intuitive.

**Acceptance Criteria:**
1.  The form is divided into exactly 4 logical steps.
2.  "Naprej" and "Nazaj" buttons are present for navigation between steps.
3.  The "Naprej" button is positioned at the right edge of the form.
4.  The "Nazaj" button is positioned at the left edge of the form.
5.  The "Naprej" button is disabled or hidden on the last step.
6.  The "Nazaj" button is disabled or hidden on the first step.
7.  Form data is preserved when navigating between steps.
8.  The "Pripravi dokumente" (Prepare documents) button is only visible and functional on the final step.
9.  All existing form fields are present and correctly rendered within their respective steps, distributed across the 4 steps.

**Dev Notes:**
*   This will involve modifications to `app.py` to manage the current step using `st.session_state` and to adjust the layout of the navigation buttons.
*   The `render_form` function will need to be adapted to render only the fields relevant to the current step, now with 4 steps.
*   Consider using Streamlit's layout features (e.g., `st.columns` or `st.container`) to position the buttons at the edges.
*   Existing tests will need updates to reflect the 4-step form and button positioning.

**Tasks / Subtasks:**
- [x] **Task 1 (AC: 1, 2, 3, 4, 5, 6, 7, 8, 9):** Modify `app.py` to implement 4-step form logic and button positioning.
    - [x] Subtask 1.1: Update `st.session_state.current_step` logic for 4 steps.
    - [x] Subtask 1.2: Redistribute form sections across 4 steps.
    - [x] Subtask 1.3: Position "Naprej" button to the right edge.
    - [x] Subtask 1.4: Position "Nazaj" button to the left edge.
    - [x] Subtask 1.5: Ensure data persistence across 4 steps.
    - [x] Subtask 1.6: Control visibility of "Pripravi dokumente" button on the final step.
- [x] **Task 2 (AC: 9):** Update relevant tests to cover the 4-step form and button positioning.

## Dev Agent Record

**Agent Model Used:** claude-sonnet-4-20250514

**Status:** Ready for Review

### Debug Log References
None

### Completion Notes
- Successfully implemented 4-step form with edge-aligned navigation buttons
- All acceptance criteria satisfied:
  - Form divided into exactly 4 logical steps
  - Navigation buttons positioned at edges (left: Nazaj, right: Naprej)
  - Button visibility controlled correctly for first/last steps
  - Data persistence maintained across all 4 steps
  - "Pripravi dokumente" button only on final step
  - All form fields distributed appropriately across steps
- E2E tests updated to cover all 4 steps and new button positioning

### File List
- `app.py` - Modified to implement 4-step form logic and edge-aligned navigation
- `tests/test_e2e.py` - Updated E2E tests for 4-step form navigation

### Change Log
- Updated form_steps definition from 3 to 4 logical steps:
  - Step 1: clientData, projectName, submissionProcedure (Basic project info)
  - Step 2: orderType (Order type and details)
  - Step 3: exclusionReasons, participationConditions (Requirements and conditions)
  - Step 4: financialGuarantees, selectionCriteria, socialCriteria, otherCriteria, contractType (Criteria and contract)
- Modified navigation button layout to use edge-aligned positioning with st.columns([1, 3, 1])
- Updated E2E tests to include new test_form_navigation_step4 and adjusted existing step tests

## QA Results

(To be filled by QA Agent)
