# Story: 9.1 - Implement Comprehensive Procurement Form Fields

## Status: Done

## Dev Agent Record

### Agent Model Used

Gemini

### Debug Log References

- Updated `SEZNAM_POTREBNIH_PODATKOV.json` with all specified fields.
- Modified `app.py` to render and capture values for all new field types.
- Updated unit tests (`tests/test_form_service.py`) to cover all new field types and their rendering.
- Updated integration tests (`tests/test_app_integration.py`) to verify the presence and basic functionality of all new fields.
- Updated end-to-end tests (`tests/test_e2e.py`) to verify all new fields are visible and can be interacted with.

### Completion Notes List

- Successfully implemented all specified form fields in `SEZNAM_POTREBNIH_PODATKOV.json` and `app.py`.
- All tests (unit, integration, e2e) passed, verifying the correct rendering and basic interaction of the new form fields.

### File List

- SEZNAM_POTREBNIH_PODATKOV.json (modified)
- app.py (modified)
- tests/test_form_service.py (modified)
- tests/test_app_integration.py (modified)
- tests/test_e2e.py (modified)

### Change Log

- 2025-08-02: Implemented comprehensive procurement form fields. Updated JSON schema, app rendering logic, and all test suites. Marked story as 'Done'.

## Dev Agent Record

### Agent Model Used

Gemini

### Debug Log References

- Updated `SEZNAM_POTREBNIH_PODATKOV.json` with all specified fields.
- Modified `app.py` to render and capture values for all new field types.
- Updated unit tests (`tests/test_form_service.py`) to cover all new field types and their rendering.
- Updated integration tests (`tests/test_app_integration.py`) to verify the presence and basic functionality of all new fields.
- Updated end-to-end tests (`tests/test_e2e.py`) to verify all new fields are visible and can be interacted with.

### Completion Notes List

- Successfully implemented all specified form fields in `SEZNAM_POTREBNIH_PODATKOV.json` and `app.py`.
- All tests (unit, integration, e2e) passed, verifying the correct rendering and basic interaction of the new form fields.

### File List

- SEZNAM_POTREBNIH_PODATKOV.json (modified)
- app.py (modified)
- tests/test_form_service.py (modified)
- tests/test_app_integration.py (modified)
- tests/test_e2e.py (modified)

### Change Log

- 2025-08-02: Implemented comprehensive procurement form fields. Updated JSON schema, app rendering logic, and all test suites. Marked story as 'Ready for Review'.

## Story
As a user, I want to input all necessary data for public procurement documentation through a comprehensive form, so that I can accurately generate various types of procurement documents.

## Acceptance Criteria
1.  The form includes the following fields with their specified input types:
    *   "Naziv in naslov naročnika": Text Input
    *   "Naziv javnega naročila in interna številka": Text Input
    *   "Predmet naročila": Multiline Text Input
    *   "CPV koda": Text Input
    *   "Tip naročila": Dropdown (single/multi-select)
    *   "Izbrani postopek oddaje": Dropdown (single-select)
    *   "Ocenjena vrednost naročila": Numeric Input (currency)
    *   "Sofinanciranje": Numeric Input (currency/percentage)
    *   "Rok izvedbe ali trajanje po podpisu pogodbe": Date Picker
    *   "Dokument tehničnih zahtev": File Upload
    *   "Merila za izbor ponudnika": Multiline Text Input
    *   "Finančna zavarovanja": Numeric Input (currency)
2.  All input values are correctly captured upon form submission.
3.  The form maintains its functionality and responsiveness with the added fields.

## Dev Notes
*   This story involves a significant update to `SEZNAM_POTREBNIH_PODATKOV.json` to define all new properties and their types.
*   `app.py`'s `render_form` function will require substantial modifications to handle `st.selectbox`, `st.multiselect`, `st.date_input`, and `st.file_uploader` components, in addition to existing text and number inputs.
*   Placeholder options will be needed for the dropdowns.
*   Error handling for file uploads (e.g., file size limits, accepted types) is out of scope for this story but should be considered for future stories.

## Tasks / Subtasks
- [ ] **Task 1 (AC: 1, 2, 3):** Update `SEZNAM_POTREBNIH_PODATKOV.json` with all specified fields.
    - [ ] Subtask 1.1: Add properties for "Naziv in naslov naročnika" (string).
    - [ ] Subtask 1.2: Add properties for "Naziv javnega naročila in interna številka" (string).
    - [ ] Subtask 1.3: Add properties for "Predmet naročila" (string, textarea format).
    - [ ] Subtask 1.4: Add properties for "CPV koda" (string).
    - [ ] Subtask 1.5: Add properties for "Tip naročila" (array of strings for multiselect, with placeholder options).
    - [ ] Subtask 1.6: Add properties for "Izbrani postopek oddaje" (string, with placeholder options).
    - [ ] Subtask 1.7: Add properties for "Ocenjena vrednost naročila" (number).
    - [ ] Subtask 1.8: Add properties for "Sofinanciranje" (number).
    - [ ] Subtask 1.9: Add properties for "Rok izvedbe ali trajanje po podpisu pogodbe" (string, date format).
    - [ ] Subtask 1.10: Add properties for "Dokument tehničnih zahtev" (string, file upload format).
    - [ ] Subtask 1.11: Add properties for "Merila za izbor ponudnika" (string, textarea format).
    - [ ] Subtask 1.12: Add properties for "Finančna zavarovanja" (number).
- [ ] **Task 2 (AC: 1, 2, 3):** Modify `app.py` to render and capture values for all new field types.
    - [ ] Subtask 2.1: Update `render_form` to handle `st.selectbox` for single-select dropdowns.
    - [ ] Subtask 2.2: Update `render_form` to handle `st.multiselect` for multi-select dropdowns.
    - [ ] Subtask 2.3: Update `render_form` to handle `st.date_input` for date pickers.
    - [ ] Subtask 2.4: Update `render_form` to handle `st.file_uploader` for file uploads.
    - [ ] Subtask 2.5: Ensure all new field values are correctly captured in `form_data`.
- [ ] **Task 3:** Update unit tests (`tests/test_form_service.py`) to cover all new field types and their rendering.
- [ ] **Task 4:** Update integration tests (`tests/test_app_integration.py`) to verify the presence and basic functionality of all new fields.
- [ ] **Task 5:** Update end-to-end tests (`tests/test_e2e.py`) to verify all new fields are visible and can be interacted with.
